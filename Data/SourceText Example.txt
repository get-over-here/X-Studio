<?xml version="1.0" standalone="yes" ?>
<?xml-stylesheet href="x2script.xsl" type="text/xsl" ?>
<script>
  <name>z.cheat.cycrow.addware</name>
  <version>1</version>
  <engineversion>43</engineversion>
  <description>Cheat: Add/Install wares to a ship</description>
  <arguments>
  </arguments>
  <sourcetext>
    <line linenr="001" indent="">
      <var>$page.id&#160;=&#160;</var>
      <text>get&#160;global&#160;variable:&#160;name=</text>
      <var>'cycrow.cheat.pageid'</var>
    </line>
    <line linenr="002" indent=""></line>
    <line linenr="003" interruptable="@" indent="">
      <var>$ship&#160;=&#160;</var>
      <var>[THIS]&#160;-&gt;</var>
      <text>&#160;call&#160;script&#160;</text>
      <call>lib.cycrow.getvalidship</call>
      <text>&#160;:&#160;</text>
    </line>
    <line linenr="004" indent="">
      <var>$ship.name&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;name</text>
    </line>
    <line linenr="005" indent=""></line>
    <line linenr="006" indent="">
      <var>$script.engine&#160;=&#160;</var>
      <text>script&#160;engine&#160;version</text>
    </line>
    <line linenr="007" indent=""></line>
    <line linenr="008" indent="">
      <var>while&#160;</var>
      <var>[TRUE]</var>
    </line>
    <line linenr="009" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1046</var>
    </line>
    <line linenr="010" indent="&#160;">
      <var>$text2&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1047</var>
    </line>
    <line linenr="011" indent="&#160;">
      <var>$text3&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1048</var>
    </line>
    <line linenr="012" indent="&#160;">
      <var>$menu&#160;=&#160;</var>
      <text>&#160;create&#160;custom&#160;menu&#160;array,&#160;info&#160;lines=</text>
      <var>$text</var>
      <text>,&#160;</text>
      <var>'&#160;'</var>
      <text>,&#160;</text>
      <var>$text2</var>
      <text>,&#160;</text>
      <var>$text3</var>
      <text>,&#160;</text>
      <var>null</var>
    </line>
    <line linenr="013" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1049</var>
    </line>
    <line linenr="014" indent="&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'equipment'</var>
    </line>
    <line linenr="015" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1051</var>
    </line>
    <line linenr="016" indent="&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'upgrade'</var>
    </line>
    <line linenr="017" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1072</var>
    </line>
    <line linenr="018" indent="&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'equipall'</var>
    </line>
    <line linenr="019" indent="&#160;">
      <var>if&#160;</var>
      <var>$script.engine</var>
      <text>&#160;</text>
      <var>&gt;</var>
      <text>&#160;</text>
      <var>40</var>
    </line>
    <line linenr="020" indent="&#160;&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1050</var>
    </line>
    <line linenr="021" indent="&#160;&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'invent'</var>
    </line>
    <line linenr="022" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="023" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1052</var>
    </line>
    <line linenr="024" indent="&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'shields'</var>
    </line>
    <line linenr="025" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1053</var>
    </line>
    <line linenr="026" indent="&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'laser'</var>
    </line>
    <line linenr="027" indent="&#160;">
      <var>if&#160;</var>
      <var>$script.engine</var>
      <text>&#160;</text>
      <var>&gt;</var>
      <text>&#160;</text>
      <var>40</var>
    </line>
    <line linenr="028" indent="&#160;&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1054</var>
    </line>
    <line linenr="029" indent="&#160;&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'missile'</var>
    </line>
    <line linenr="030" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="031" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1055</var>
    </line>
    <line linenr="032" indent="&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'energy'</var>
    </line>
    <line linenr="033" indent="&#160;"></line>
    <line linenr="034" interruptable="@" indent="&#160;">
      <var>$aEmp&#160;=&#160;</var>
      <var>[THIS]&#160;-&gt;</var>
      <text>&#160;call&#160;script&#160;</text>
      <call>lib.cycrow.getusedemp</call>
      <text>&#160;:&#160;</text>
    </line>
    <line linenr="035" indent="&#160;">
      <var>if&#160;</var>
      <var>$aEmp</var>
    </line>
    <line linenr="036" indent="&#160;&#160;">
      <var>if&#160;</var>
      <text>&#160;size&#160;of&#160;array&#160;</text>
      <var>$aEmp</var>
    </line>
    <line linenr="037" indent="&#160;&#160;&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1091</var>
    </line>
    <line linenr="038" indent="&#160;&#160;&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'emp'</var>
    </line>
    <line linenr="039" indent="&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="040" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="041" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1056</var>
    </line>
    <line linenr="042" indent="&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'any'</var>
    </line>
    <line linenr="043" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1057</var>
    </line>
    <line linenr="044" indent="&#160;">
      <var>$ret&#160;=&#160;</var>
      <text>&#160;open&#160;custom&#160;menu:&#160;title=</text>
      <var>$text</var>
      <text>&#160;description=</text>
      <var>$ship.name</var>
      <text>&#160;option&#160;array=</text>
      <var>$menu</var>
    </line>
    <line linenr="045" indent="&#160;"></line>
    <line linenr="046" indent="&#160;">
      <text>gosub&#160;</text>
      <var>reset</var>
    </line>
    <line linenr="047" indent="&#160;"></line>
    <line linenr="048" indent="&#160;">
      <var>if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'upgrade'</var>
    </line>
    <line linenr="049" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getUpgrade</var>
    </line>
    <line linenr="050" indent="&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'remove'</var>
    </line>
    <line linenr="051" interruptable="@" indent="&#160;&#160;">
      <var>=&#160;</var>
      <var>[THIS]&#160;-&gt;</var>
      <text>&#160;call&#160;script&#160;</text>
      <call>z.cheat.cycrow.removeware</call>
      <text>&#160;:&#160;</text>
      <text>&#160;Ship=</text>
      <var>$ship</var>
    </line>
    <line linenr="052" indent="&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'equipall'</var>
    </line>
    <line linenr="053" interruptable="@" indent="&#160;&#160;">
      <var>=&#160;</var>
      <var>[THIS]&#160;-&gt;</var>
      <text>&#160;call&#160;script&#160;</text>
      <call>z.cheat.cycrow.equipall</call>
      <text>&#160;:&#160;</text>
      <text>&#160;ship=</text>
      <var>$ship</var>
    </line>
    <line linenr="054" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>installSound</var>
    </line>
    <line linenr="055" indent="&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'equipment'</var>
    </line>
    <line linenr="056" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getEquipment</var>
    </line>
    <line linenr="057" indent="&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'invent'</var>
    </line>
    <line linenr="058" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getInventory</var>
    </line>
    <line linenr="059" indent="&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'laser'</var>
    </line>
    <line linenr="060" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getLasers</var>
    </line>
    <line linenr="061" indent="&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'missile'</var>
    </line>
    <line linenr="062" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getMissiles</var>
    </line>
    <line linenr="063" indent="&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'shields'</var>
    </line>
    <line linenr="064" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getShields</var>
    </line>
    <line linenr="065" indent="&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'any'</var>
    </line>
    <line linenr="066" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getWares</var>
    </line>
    <line linenr="067" indent="&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'emp'</var>
    </line>
    <line linenr="068" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getEmp</var>
    </line>
    <line linenr="069" indent="&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'energy'</var>
    </line>
    <line linenr="070" indent="&#160;&#160;">
      <var>$chk.ware&#160;=&#160;</var>
      <var>Energy&#160;Cells</var>
    </line>
    <line linenr="071" indent="&#160;&#160;">
      <var>$ret.ware&#160;=&#160;</var>
      <var>Energy&#160;Cells</var>
    </line>
    <line linenr="072" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getAmount</var>
    </line>
    <line linenr="073" indent="&#160;">
      <text>else</text>
    </line>
    <line linenr="074" indent="&#160;&#160;">
      <text>return&#160;</text>
      <var>null</var>
    </line>
    <line linenr="075" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="076" indent="&#160;"></line>
    <line linenr="077" indent="&#160;">
      <var>if&#160;</var>
      <var>$ret.amt</var>
    </line>
    <line linenr="078" indent="&#160;&#160;">
      <var>if&#160;</var>
      <var>$ret.ware</var>
    </line>
    <line linenr="079" indent="&#160;&#160;&#160;">
      <var>=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;add&#160;</text>
      <var>$ret.amt</var>
      <text>&#160;units&#160;of&#160;</text>
      <var>$ret.ware</var>
    </line>
    <line linenr="080" indent="&#160;&#160;&#160;">
      <text>gosub&#160;</text>
      <var>addSound</var>
    </line>
    <line linenr="081" indent="&#160;&#160;">
      <var>else&#160;if&#160;</var>
      <var>$ret.install</var>
    </line>
    <line linenr="082" indent="&#160;&#160;&#160;">
      <var>if&#160;</var>
      <var>$script.engine</var>
      <text>&#160;</text>
      <var>&gt;</var>
      <text>&#160;</text>
      <var>40</var>
    </line>
    <line linenr="083" indent="&#160;&#160;&#160;&#160;">
      <var>if&#160;</var>
      <text>&#160;is&#160;inventory:&#160;ware=</text>
      <var>$ret.install</var>
    </line>
    <line linenr="084" indent="&#160;&#160;&#160;&#160;&#160;">
      <var>=&#160;</var>
      <var>[PLAYERSHIP]&#160;-&gt;</var>
      <text>&#160;install&#160;</text>
      <var>$ret.amt</var>
      <text>&#160;units&#160;of&#160;</text>
      <var>$ret.install</var>
    </line>
    <line linenr="085" indent="&#160;&#160;&#160;&#160;&#160;">
      <text>gosub&#160;</text>
      <var>installSound</var>
    </line>
    <line linenr="086" indent="&#160;&#160;&#160;&#160;&#160;">
      <var>$ret.install&#160;=&#160;</var>
      <var>null</var>
    </line>
    <line linenr="087" indent="&#160;&#160;&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="088" indent="&#160;&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="089" indent="&#160;&#160;&#160;">
      <var>if&#160;</var>
      <var>$ret.install</var>
    </line>
    <line linenr="090" indent="&#160;&#160;&#160;&#160;">
      <var>=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;install&#160;</text>
      <var>$ret.amt</var>
      <text>&#160;units&#160;of&#160;</text>
      <var>$ret.install</var>
    </line>
    <line linenr="091" indent="&#160;&#160;&#160;&#160;">
      <text>gosub&#160;</text>
      <var>installSound</var>
    </line>
    <line linenr="092" indent="&#160;&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="093" indent="&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="094" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="095" indent="">
      <text>end</text>
    </line>
    <line linenr="096" indent=""></line>
    <line linenr="097" indent="">
      <text>return&#160;</text>
      <var>null</var>
    </line>
    <line linenr="098" indent=""></line>
    <line linenr="099" indent="">
      <var>reset</var>
      <text>:</text>
    </line>
    <line linenr="100" indent="">
      <var>$ret.amt&#160;=&#160;</var>
      <var>0</var>
    </line>
    <line linenr="101" indent="">
      <var>$ret.install&#160;=&#160;</var>
      <var>null</var>
    </line>
    <line linenr="102" indent="">
      <var>$ret.ware&#160;=&#160;</var>
      <var>null</var>
    </line>
    <line linenr="103" indent="">
      <var>$chk.ware&#160;=&#160;</var>
      <var>null</var>
    </line>
    <line linenr="104" indent="">
      <text>endsub</text>
    </line>
    <line linenr="105" indent=""></line>
    <line linenr="106" indent="">
      <var>getUpgrade</var>
      <text>:</text>
    </line>
    <line linenr="107" indent="">
      <var>$aDisplay&#160;=&#160;</var>
      <text>&#160;array&#160;alloc:&#160;size=</text>
      <var>0</var>
    </line>
    <line linenr="108" indent="">
      <var>$count&#160;=&#160;</var>
      <text>&#160;get&#160;number&#160;of&#160;subtypes&#160;of&#160;maintype&#160;</text>
      <var>[SSTYPE_W_TECH]</var>
    </line>
    <line linenr="109" indent="">
      <var>while&#160;</var>
      <var>$count</var>
    </line>
    <line linenr="110" indent="&#160;">
      <text>dec&#160;</text>
      <var>$count&#160;=&#160;</var>
    </line>
    <line linenr="111" indent="&#160;">
      <var>$ware&#160;=&#160;</var>
      <text>&#160;get&#160;ware&#160;from&#160;maintype&#160;</text>
      <var>[SSTYPE_W_TECH]</var>
      <text>&#160;and&#160;subtype&#160;</text>
      <var>$count</var>
    </line>
    <line linenr="112" indent="&#160;">
      <var>if&#160;</var>
      <text>&#160;is&#160;upgrade:&#160;ware=</text>
      <var>$ware</var>
    </line>
    <line linenr="113" indent="&#160;&#160;">
      <text>append&#160;</text>
      <var>$ware</var>
      <text>&#160;to&#160;array&#160;</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="114" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="115" indent="">
      <text>end</text>
    </line>
    <line linenr="116" indent="">
      <var>$aDisplay&#160;=&#160;</var>
      <text>&#160;sort&#160;array&#160;</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="117" indent=""></line>
    <line linenr="118" indent="">
      <var>$max&#160;=&#160;</var>
      <text>&#160;size&#160;of&#160;array&#160;</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="119" indent="">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>2040</var>
    </line>
    <line linenr="120" indent="">
      <text>add&#160;custom&#160;menu&#160;heading&#160;to&#160;array&#160;</text>
      <var>$aDisplay</var>
      <text>:&#160;title=</text>
      <var>$text</var>
    </line>
    <line linenr="121" indent=""></line>
    <line linenr="122" indent="">
      <var>while&#160;</var>
      <var>$count</var>
      <text>&#160;</text>
      <var>&lt;</var>
      <text>&#160;</text>
      <var>$max</var>
    </line>
    <line linenr="123" indent="&#160;">
      <var>$ware&#160;=&#160;</var>
      <var>$aDisplay</var>
      <text>[</text>
      <var>$count</var>
      <text>]</text>
    </line>
    <line linenr="124" indent="&#160;">
      <var>$a&#160;=&#160;</var>
      <text>&#160;create&#160;new&#160;array,&#160;arguments=</text>
      <var>$ware</var>
      <text>,&#160;</text>
      <var>-1</var>
      <text>,&#160;</text>
      <var>null</var>
      <text>,&#160;</text>
      <var>null</var>
      <text>,&#160;</text>
      <var>null</var>
    </line>
    <line linenr="125" indent="&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$aDisplay</var>
      <text>:&#160;text=</text>
      <var>$ware</var>
      <text>&#160;returnvalue=</text>
      <var>$a</var>
    </line>
    <line linenr="126" indent="&#160;">
      <text>inc&#160;</text>
      <var>$count&#160;=&#160;</var>
    </line>
    <line linenr="127" indent="">
      <text>end</text>
    </line>
    <line linenr="128" indent=""></line>
    <line linenr="129" indent="">
      <text>gosub&#160;</text>
      <var>displayChoise</var>
    </line>
    <line linenr="130" indent="">
      <text>endsub</text>
    </line>
    <line linenr="131" indent=""></line>
    <line linenr="132" indent="">
      <var>getInventory</var>
      <text>:</text>
    </line>
    <line linenr="133" indent="">
      <var>$aDisplay&#160;=&#160;</var>
      <text>&#160;array&#160;alloc:&#160;size=</text>
      <var>0</var>
    </line>
    <line linenr="134" indent="">
      <var>$count&#160;=&#160;</var>
      <text>&#160;get&#160;number&#160;of&#160;subtypes&#160;of&#160;maintype&#160;</text>
      <var>[SSTYPE_W_TECH]</var>
    </line>
    <line linenr="135" indent="">
      <var>while&#160;</var>
      <var>$count</var>
    </line>
    <line linenr="136" indent="&#160;">
      <text>dec&#160;</text>
      <var>$count&#160;=&#160;</var>
    </line>
    <line linenr="137" indent="&#160;">
      <var>$ware&#160;=&#160;</var>
      <text>&#160;get&#160;ware&#160;from&#160;maintype&#160;</text>
      <var>[SSTYPE_W_TECH]</var>
      <text>&#160;and&#160;subtype&#160;</text>
      <var>$count</var>
    </line>
    <line linenr="138" indent="&#160;">
      <var>if&#160;</var>
      <text>&#160;is&#160;inventory:&#160;ware=</text>
      <var>$ware</var>
    </line>
    <line linenr="139" indent="&#160;&#160;">
      <text>append&#160;</text>
      <var>$ware</var>
      <text>&#160;to&#160;array&#160;</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="140" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="141" indent="">
      <text>end</text>
    </line>
    <line linenr="142" indent="">
      <var>$aDisplay&#160;=&#160;</var>
      <text>&#160;sort&#160;array&#160;</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="143" indent="">
      <text>gosub&#160;</text>
      <var>displayChoise</var>
    </line>
    <line linenr="144" indent="">
      <text>endsub</text>
    </line>
    <line linenr="145" indent=""></line>
    <line linenr="146" indent="">
      <var>getEquipment</var>
      <text>:</text>
    </line>
    <line linenr="147" indent="">
      <var>$aDisplay&#160;=&#160;</var>
      <text>&#160;array&#160;alloc:&#160;size=</text>
      <var>0</var>
    </line>
    <line linenr="148" indent="">
      <var>$count&#160;=&#160;</var>
      <text>&#160;get&#160;number&#160;of&#160;subtypes&#160;of&#160;maintype&#160;</text>
      <var>[SSTYPE_W_TECH]</var>
    </line>
    <line linenr="149" indent="">
      <var>while&#160;</var>
      <var>$count</var>
    </line>
    <line linenr="150" indent="&#160;">
      <text>dec&#160;</text>
      <var>$count&#160;=&#160;</var>
    </line>
    <line linenr="151" indent="&#160;">
      <var>$ware&#160;=&#160;</var>
      <text>&#160;get&#160;ware&#160;from&#160;maintype&#160;</text>
      <var>[SSTYPE_W_TECH]</var>
      <text>&#160;and&#160;subtype&#160;</text>
      <var>$count</var>
    </line>
    <line linenr="152" indent="&#160;">
      <var>if&#160;</var>
      <var>$script.engine</var>
      <text>&#160;</text>
      <var>&gt;</var>
      <text>&#160;</text>
      <var>40</var>
    </line>
    <line linenr="153" indent="&#160;&#160;">
      <var>skip&#160;if&#160;not&#160;</var>
      <text>&#160;is&#160;inventory:&#160;ware=</text>
      <var>$ware</var>
    </line>
    <line linenr="154" indent="&#160;&#160;&#160;">
      <text>continue</text>
    </line>
    <line linenr="155" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="156" indent="&#160;">
      <var>skip&#160;if&#160;not&#160;</var>
      <text>&#160;is&#160;upgrade:&#160;ware=</text>
      <var>$ware</var>
    </line>
    <line linenr="157" indent="&#160;&#160;">
      <text>continue</text>
    </line>
    <line linenr="158" indent="&#160;">
      <var>if&#160;</var>
      <text>&#160;is&#160;equipment:&#160;ware=</text>
      <var>$ware</var>
    </line>
    <line linenr="159" indent="&#160;&#160;">
      <text>append&#160;</text>
      <var>$ware</var>
      <text>&#160;to&#160;array&#160;</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="160" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="161" indent="">
      <text>end</text>
    </line>
    <line linenr="162" indent="">
      <var>$aDisplay&#160;=&#160;</var>
      <text>&#160;sort&#160;array&#160;</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="163" indent="">
      <text>gosub&#160;</text>
      <var>displayChoise</var>
    </line>
    <line linenr="164" indent="">
      <text>endsub</text>
    </line>
    <line linenr="165" indent=""></line>
    <line linenr="166" indent="">
      <var>getShields</var>
      <text>:</text>
    </line>
    <line linenr="167" indent="">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1058</var>
    </line>
    <line linenr="168" indent="">
      <var>$aDisplay&#160;=&#160;</var>
      <text>&#160;create&#160;custom&#160;menu&#160;array:&#160;heading=</text>
      <var>$text</var>
    </line>
    <line linenr="169" indent="">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1059</var>
    </line>
    <line linenr="170" indent="">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$aDisplay</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'max.shields'</var>
    </line>
    <line linenr="171" indent="">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1060</var>
    </line>
    <line linenr="172" indent="">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$aDisplay</var>
      <text>:&#160;text=</text>
      <var>$text</var>
      <text>&#160;returnvalue=</text>
      <var>'rem.shields'</var>
    </line>
    <line linenr="173" indent="">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1061</var>
    </line>
    <line linenr="174" indent="">
      <text>add&#160;custom&#160;menu&#160;heading&#160;to&#160;array&#160;</text>
      <var>$aDisplay</var>
      <text>:&#160;title=</text>
      <var>$text</var>
    </line>
    <line linenr="175" indent="">
      <var>$max&#160;=&#160;</var>
      <text>&#160;get&#160;number&#160;of&#160;subtypes&#160;of&#160;maintype&#160;</text>
      <var>[SSTYPE_SHIELD]</var>
    </line>
    <line linenr="176" indent="">
      <var>$max.Shield&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;max.&#160;shield&#160;type&#160;that&#160;can&#160;be&#160;installed</text>
    </line>
    <line linenr="177" indent="">
      <var>$count&#160;=&#160;</var>
      <var>0</var>
    </line>
    <line linenr="178" indent="">
      <var>while&#160;</var>
      <var>$count</var>
      <text>&#160;</text>
      <var>&lt;</var>
      <text>&#160;</text>
      <var>$max</var>
    </line>
    <line linenr="179" indent="&#160;">
      <var>$ware&#160;=&#160;</var>
      <text>&#160;get&#160;ware&#160;from&#160;maintype&#160;</text>
      <var>[SSTYPE_SHIELD]</var>
      <text>&#160;and&#160;subtype&#160;</text>
      <var>$count</var>
    </line>
    <line linenr="180" indent="&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$aDisplay</var>
      <text>:&#160;text=</text>
      <var>$ware</var>
      <text>&#160;returnvalue=</text>
      <var>$ware</var>
    </line>
    <line linenr="181" indent="&#160;">
      <text>inc&#160;</text>
      <var>$count&#160;=&#160;</var>
    </line>
    <line linenr="182" indent="&#160;">
      <var>skip&#160;if&#160;</var>
      <var>$ware</var>
      <text>&#160;</text>
      <var>!=</var>
      <text>&#160;</text>
      <var>$max.Shield</var>
    </line>
    <line linenr="183" indent="&#160;&#160;">
      <text>break</text>
    </line>
    <line linenr="184" indent="">
      <text>end</text>
    </line>
    <line linenr="185" indent=""></line>
    <line linenr="186" indent="">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1062</var>
    </line>
    <line linenr="187" indent="">
      <var>$ret&#160;=&#160;</var>
      <text>&#160;open&#160;custom&#160;menu:&#160;title=</text>
      <var>$text</var>
      <text>&#160;description=</text>
      <var>$ship.name</var>
      <text>&#160;option&#160;array=</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="188" indent="">
      <var>if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'max.shields'</var>
    </line>
    <line linenr="189" indent="&#160;">
      <var>$ret.amt&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;number&#160;of&#160;shield&#160;bays</text>
    </line>
    <line linenr="190" indent="&#160;">
      <var>$ret.install&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;max.&#160;shield&#160;type&#160;that&#160;can&#160;be&#160;installed</text>
    </line>
    <line linenr="191" indent="">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>'rem.shields'</var>
    </line>
    <line linenr="192" indent="&#160;">
      <var>$ret.amt&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;number&#160;of&#160;shield&#160;bays</text>
    </line>
    <line linenr="193" indent="&#160;">
      <var>$ret.install&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;max.&#160;shield&#160;type&#160;that&#160;can&#160;be&#160;installed</text>
    </line>
    <line linenr="194" indent="&#160;">
      <var>$max&#160;=&#160;</var>
      <var>$ret.amt</var>
    </line>
    <line linenr="195" indent="&#160;">
      <var>while&#160;</var>
      <var>$max</var>
    </line>
    <line linenr="196" indent="&#160;&#160;">
      <text>dec&#160;</text>
      <var>$max&#160;=&#160;</var>
    </line>
    <line linenr="197" indent="&#160;&#160;">
      <var>skip&#160;if&#160;not&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;shield&#160;type&#160;in&#160;bay&#160;</text>
      <var>$max</var>
    </line>
    <line linenr="198" indent="&#160;&#160;&#160;">
      <text>dec&#160;</text>
      <var>$ret.amt&#160;=&#160;</var>
    </line>
    <line linenr="199" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="200" indent="">
      <var>else&#160;if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>!=</var>
      <text>&#160;</text>
      <var>-1</var>
    </line>
    <line linenr="201" indent="&#160;">
      <var>$ret.install&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="202" indent="&#160;">
      <var>$chk.ware&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="203" indent="&#160;">
      <text>gosub&#160;</text>
      <var>getAmount</var>
    </line>
    <line linenr="204" indent="">
      <text>end</text>
    </line>
    <line linenr="205" indent=""></line>
    <line linenr="206" indent="">
      <text>endsub</text>
    </line>
    <line linenr="207" indent=""></line>
    <line linenr="208" indent="">
      <var>getLasers</var>
      <text>:</text>
    </line>
    <line linenr="209" indent="">
      <var>$menu&#160;=&#160;</var>
      <text>&#160;create&#160;custom&#160;menu&#160;array</text>
    </line>
    <line linenr="210" indent="">
      <var>$turrets&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;number&#160;of&#160;turrets</text>
    </line>
    <line linenr="211" indent="">
      <var>$i&#160;=&#160;</var>
      <var>0</var>
    </line>
    <line linenr="212" indent="">
      <var>while&#160;</var>
      <var>$i</var>
      <text>&#160;</text>
      <var>&lt;</var>
      <text>&#160;</text>
      <var>$turrets</var>
    </line>
    <line linenr="213" indent="&#160;">
      <var>$numWeapons&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;max.&#160;number&#160;of&#160;lasers&#160;in&#160;turret&#160;</text>
      <var>$i</var>
    </line>
    <line linenr="214" indent="&#160;">
      <var>if&#160;</var>
      <var>$numWeapons</var>
    </line>
    <line linenr="215" indent="&#160;&#160;">
      <var>if&#160;</var>
      <var>$i</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>0</var>
    </line>
    <line linenr="216" indent="&#160;&#160;&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1068</var>
    </line>
    <line linenr="217" indent="&#160;&#160;">
      <text>else</text>
    </line>
    <line linenr="218" indent="&#160;&#160;&#160;">
      <var>$text&#160;=&#160;</var>
      <text>sprintf:&#160;pageid=</text>
      <var>$page.id</var>
      <text>&#160;textid=</text>
      <var>1069</var>
      <text>,&#160;</text>
      <var>$i</var>
      <text>,&#160;</text>
      <var>null</var>
      <text>,&#160;</text>
      <var>null</var>
      <text>,&#160;</text>
      <var>null</var>
      <text>,&#160;</text>
      <var>null</var>
    </line>
    <line linenr="219" indent="&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="220" indent="&#160;&#160;">
      <text>add&#160;custom&#160;menu&#160;heading&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;title=</text>
      <var>$text</var>
    </line>
    <line linenr="221" indent="&#160;&#160;">
      <var>$weapons&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;compatible&#160;laser&#160;array:&#160;turret=</text>
      <var>$i</var>
    </line>
    <line linenr="222" indent="&#160;&#160;">
      <var>$weapons&#160;=&#160;</var>
      <text>&#160;sort&#160;array&#160;</text>
      <var>$weapons</var>
    </line>
    <line linenr="223" indent="&#160;&#160;">
      <var>$weapons&#160;=&#160;</var>
      <text>&#160;reverse&#160;array&#160;</text>
      <var>$weapons</var>
    </line>
    <line linenr="224" indent="&#160;&#160;">
      <var>$w.count&#160;=&#160;</var>
      <text>&#160;size&#160;of&#160;array&#160;</text>
      <var>$weapons</var>
    </line>
    <line linenr="225" indent="&#160;&#160;">
      <var>while&#160;</var>
      <var>$w.count</var>
    </line>
    <line linenr="226" indent="&#160;&#160;&#160;">
      <text>dec&#160;</text>
      <var>$w.count&#160;=&#160;</var>
    </line>
    <line linenr="227" indent="&#160;&#160;&#160;">
      <var>$w&#160;=&#160;</var>
      <var>$weapons</var>
      <text>[</text>
      <var>$w.count</var>
      <text>]</text>
    </line>
    <line linenr="228" indent="&#160;&#160;&#160;">
      <var>$arr&#160;=&#160;</var>
      <text>&#160;create&#160;new&#160;array,&#160;arguments=</text>
      <var>$i</var>
      <text>,&#160;</text>
      <var>$w</var>
      <text>,&#160;</text>
      <var>null</var>
      <text>,&#160;</text>
      <var>null</var>
      <text>,&#160;</text>
      <var>null</var>
    </line>
    <line linenr="229" indent="&#160;&#160;&#160;">
      <text>add&#160;custom&#160;menu&#160;item&#160;to&#160;array&#160;</text>
      <var>$menu</var>
      <text>:&#160;text=</text>
      <var>$w</var>
      <text>&#160;returnvalue=</text>
      <var>$arr</var>
    </line>
    <line linenr="230" indent="&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="231" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="232" indent="&#160;">
      <text>inc&#160;</text>
      <var>$i&#160;=&#160;</var>
    </line>
    <line linenr="233" indent="">
      <text>end</text>
    </line>
    <line linenr="234" indent=""></line>
    <line linenr="235" indent="">
      <var>if&#160;</var>
      <text>&#160;size&#160;of&#160;array&#160;</text>
      <var>$menu</var>
    </line>
    <line linenr="236" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1070</var>
    </line>
    <line linenr="237" indent="&#160;">
      <var>$text2&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1071</var>
    </line>
    <line linenr="238" indent="&#160;">
      <var>$ret&#160;=&#160;</var>
      <text>&#160;open&#160;custom&#160;menu:&#160;title=</text>
      <var>$text</var>
      <text>&#160;description=</text>
      <var>$text2</var>
      <text>&#160;option&#160;array=</text>
      <var>$menu</var>
    </line>
    <line linenr="239" indent="&#160;">
      <var>if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>!=</var>
      <text>&#160;</text>
      <var>-1</var>
    </line>
    <line linenr="240" indent="&#160;&#160;">
      <var>$i&#160;=&#160;</var>
      <var>$ret</var>
      <text>[</text>
      <var>0</var>
      <text>]</text>
    </line>
    <line linenr="241" indent="&#160;&#160;">
      <var>$w&#160;=&#160;</var>
      <var>$ret</var>
      <text>[</text>
      <var>1</var>
      <text>]</text>
    </line>
    <line linenr="242" indent="&#160;&#160;">
      <var>$w.count&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;max.&#160;number&#160;of&#160;lasers&#160;in&#160;turret&#160;</text>
      <var>$i</var>
    </line>
    <line linenr="243" indent="&#160;&#160;">
      <var>=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;add&#160;</text>
      <var>$w.count</var>
      <text>&#160;units&#160;of&#160;</text>
      <var>$w</var>
    </line>
    <line linenr="244" indent="&#160;&#160;">
      <var>while&#160;</var>
      <var>$w.count</var>
    </line>
    <line linenr="245" indent="&#160;&#160;&#160;">
      <text>dec&#160;</text>
      <var>$w.count&#160;=&#160;</var>
    </line>
    <line linenr="246" indent="&#160;&#160;&#160;">
      <var>$ship&#160;-&gt;</var>
      <text>&#160;switch&#160;laser&#160;in&#160;turret&#160;</text>
      <var>$i</var>
      <text>&#160;gun&#160;</text>
      <var>$w.count</var>
      <text>&#160;to&#160;</text>
      <var>$w</var>
    </line>
    <line linenr="247" indent="&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="248" indent="&#160;&#160;">
      <var>$ret.speak&#160;=&#160;</var>
      <var>$w</var>
    </line>
    <line linenr="249" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>speakArray</var>
    </line>
    <line linenr="250" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="251" indent="">
      <text>end</text>
    </line>
    <line linenr="252" indent="">
      <text>endsub</text>
    </line>
    <line linenr="253" indent=""></line>
    <line linenr="254" indent="">
      <var>getMissiles</var>
      <text>:</text>
    </line>
    <line linenr="255" indent="">
      <var>$aMissiles&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;compatible&#160;missile&#160;array</text>
    </line>
    <line linenr="256" indent="">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1066</var>
    </line>
    <line linenr="257" indent="">
      <var>$text2&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1067</var>
    </line>
    <line linenr="258" indent="">
      <var>$ret&#160;=&#160;</var>
      <text>&#160;open&#160;custom&#160;menu:&#160;title=</text>
      <var>$text</var>
      <text>&#160;description=</text>
      <var>$text2</var>
      <text>&#160;option&#160;array=</text>
      <var>$aMissiles</var>
    </line>
    <line linenr="259" indent="">
      <var>if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>!=</var>
      <text>&#160;</text>
      <var>-1</var>
    </line>
    <line linenr="260" indent="&#160;">
      <var>$ware&#160;=&#160;</var>
      <var>$aMissiles</var>
      <text>[</text>
      <var>$ret</var>
      <text>]</text>
    </line>
    <line linenr="261" indent="&#160;">
      <var>$ret.install&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="262" indent="&#160;">
      <var>$chk.ware&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="263" indent="&#160;">
      <text>gosub&#160;</text>
      <var>getAmount</var>
    </line>
    <line linenr="264" indent="">
      <text>end</text>
    </line>
    <line linenr="265" indent="">
      <text>endsub</text>
    </line>
    <line linenr="266" indent=""></line>
    <line linenr="267" indent="">
      <var>getEmp</var>
      <text>:</text>
    </line>
    <line linenr="268" interruptable="@" indent="">
      <var>$aDisplay&#160;=&#160;</var>
      <var>[THIS]&#160;-&gt;</var>
      <text>&#160;call&#160;script&#160;</text>
      <call>lib.cycrow.getusedemp</call>
      <text>&#160;:&#160;</text>
    </line>
    <line linenr="269" indent="">
      <var>if&#160;</var>
      <var>$aDisplay</var>
    </line>
    <line linenr="270" indent="&#160;">
      <var>if&#160;</var>
      <text>&#160;size&#160;of&#160;array&#160;</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="271" indent="&#160;&#160;">
      <var>$aDisplay&#160;=&#160;</var>
      <text>&#160;sort&#160;array&#160;</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="272" indent="&#160;&#160;">
      <text>gosub&#160;</text>
      <var>displayChoise</var>
    </line>
    <line linenr="273" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="274" indent="">
      <text>end</text>
    </line>
    <line linenr="275" indent="">
      <text>endsub</text>
    </line>
    <line linenr="276" indent=""></line>
    <line linenr="277" indent="">
      <var>getWares</var>
      <text>:</text>
    </line>
    <line linenr="278" indent="">
      <var>$aDisplay&#160;=&#160;</var>
      <var>null</var>
    </line>
    <line linenr="279" indent="">
      <text>gosub&#160;</text>
      <var>displayChoise</var>
    </line>
    <line linenr="280" indent="">
      <text>endsub</text>
    </line>
    <line linenr="281" indent=""></line>
    <line linenr="282" indent="">
      <var>displayChoise</var>
      <text>:</text>
    </line>
    <line linenr="283" indent="">
      <var>$ware&#160;=&#160;</var>
      <var>null</var>
    </line>
    <line linenr="284" indent="">
      <var>if&#160;</var>
      <text>&#160;size&#160;of&#160;array&#160;</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="285" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1063</var>
    </line>
    <line linenr="286" indent="&#160;">
      <var>$ret&#160;=&#160;</var>
      <text>&#160;open&#160;custom&#160;menu:&#160;title=</text>
      <var>$text</var>
      <text>&#160;description=</text>
      <var>$ship.name</var>
      <text>&#160;option&#160;array=</text>
      <var>$aDisplay</var>
    </line>
    <line linenr="287" indent="&#160;">
      <var>$amt&#160;=&#160;</var>
      <var>0</var>
    </line>
    <line linenr="288" indent="&#160;">
      <var>if&#160;</var>
      <var>$ret</var>
      <text>&#160;</text>
      <var>!=</var>
      <text>&#160;</text>
      <var>-1</var>
    </line>
    <line linenr="289" indent="&#160;&#160;">
      <var>if&#160;</var>
      <text>&#160;is&#160;datatyp[&#160;</text>
      <var>$ret</var>
      <text>&#160;]&#160;==&#160;</text>
      <var>DATATYP_ARRAY</var>
    </line>
    <line linenr="290" indent="&#160;&#160;&#160;">
      <var>$ware&#160;=&#160;</var>
      <var>$ret</var>
      <text>[</text>
      <var>0</var>
      <text>]</text>
    </line>
    <line linenr="291" indent="&#160;&#160;&#160;">
      <var>$amt&#160;=&#160;</var>
      <var>$ret</var>
      <text>[</text>
      <var>1</var>
      <text>]</text>
    </line>
    <line linenr="292" indent="&#160;&#160;">
      <text>else</text>
    </line>
    <line linenr="293" indent="&#160;&#160;&#160;">
      <var>$ware&#160;=&#160;</var>
      <var>$aDisplay</var>
      <text>[</text>
      <var>$ret</var>
      <text>]</text>
    </line>
    <line linenr="294" indent="&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="295" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="296" indent="">
      <text>else</text>
    </line>
    <line linenr="297" indent="&#160;">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1063</var>
    </line>
    <line linenr="298" indent="&#160;">
      <var>$ware&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;user&#160;input:&#160;type=</text>
      <var>Var/Ware</var>
      <text>,&#160;title=</text>
      <var>$text</var>
    </line>
    <line linenr="299" indent="">
      <text>end</text>
    </line>
    <line linenr="300" indent=""></line>
    <line linenr="301" indent="">
      <var>if&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="302" indent="&#160;">
      <var>$chk.ware&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="303" indent="&#160;">
      <var>if&#160;</var>
      <var>$amt</var>
    </line>
    <line linenr="304" indent="&#160;&#160;">
      <var>if&#160;</var>
      <var>$amt</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>-1</var>
    </line>
    <line linenr="305" indent="&#160;&#160;&#160;">
      <var>if&#160;</var>
      <text>&#160;is&#160;equipment:&#160;ware=</text>
      <var>$ware</var>
    </line>
    <line linenr="306" indent="&#160;&#160;&#160;&#160;">
      <var>$ret.install&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="307" indent="&#160;&#160;&#160;">
      <text>else</text>
    </line>
    <line linenr="308" indent="&#160;&#160;&#160;&#160;">
      <var>$ret.ware&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="309" indent="&#160;&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="310" indent="&#160;&#160;&#160;">
      <var>if&#160;</var>
      <text>&#160;is&#160;upgrade:&#160;ware=</text>
      <var>$chk.ware</var>
    </line>
    <line linenr="311" indent="&#160;&#160;&#160;&#160;">
      <var>$amt&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;amount&#160;of&#160;ware&#160;</text>
      <var>$chk.ware</var>
      <text>&#160;in&#160;cargo&#160;bay</text>
    </line>
    <line linenr="312" indent="&#160;&#160;&#160;&#160;">
      <var>$free&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;max&#160;upgrades&#160;for&#160;upgrade&#160;</text>
      <var>$chk.ware</var>
    </line>
    <line linenr="313" indent="&#160;&#160;&#160;&#160;">
      <var>$free&#160;=&#160;</var>
      <var>$free</var>
      <text>&#160;</text>
      <var>-</var>
      <text>&#160;</text>
      <var>$amt</var>
    </line>
    <line linenr="314" indent="&#160;&#160;&#160;&#160;">
      <var>$ret.install&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="315" indent="&#160;&#160;&#160;">
      <text>else</text>
    </line>
    <line linenr="316" indent="&#160;&#160;&#160;&#160;">
      <var>$free&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;free&#160;amount&#160;of&#160;ware&#160;</text>
      <var>$chk.ware</var>
      <text>&#160;in&#160;cargo&#160;bay</text>
    </line>
    <line linenr="317" indent="&#160;&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="318" indent="&#160;&#160;&#160;">
      <var>$ret.amt&#160;=&#160;</var>
      <var>$free</var>
    </line>
    <line linenr="319" indent="&#160;&#160;">
      <text>else</text>
    </line>
    <line linenr="320" indent="&#160;&#160;&#160;">
      <var>$ret.amt&#160;=&#160;</var>
      <var>$amt</var>
    </line>
    <line linenr="321" indent="&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="322" indent="&#160;">
      <text>else</text>
    </line>
    <line linenr="323" indent="&#160;&#160;">
      <var>if&#160;</var>
      <text>&#160;is&#160;upgrade:&#160;ware=</text>
      <var>$ware</var>
    </line>
    <line linenr="324" indent="&#160;&#160;&#160;">
      <var>$ret.install&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="325" indent="&#160;&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getAmount</var>
    </line>
    <line linenr="326" indent="&#160;&#160;">
      <var>else&#160;if&#160;</var>
      <text>&#160;is&#160;equipment:&#160;ware=</text>
      <var>$ware</var>
    </line>
    <line linenr="327" indent="&#160;&#160;&#160;">
      <var>$ret.install&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="328" indent="&#160;&#160;&#160;">
      <var>$ret.amt&#160;=&#160;</var>
      <var>1</var>
    </line>
    <line linenr="329" indent="&#160;&#160;">
      <text>else</text>
    </line>
    <line linenr="330" indent="&#160;&#160;&#160;">
      <var>$ret.ware&#160;=&#160;</var>
      <var>$ware</var>
    </line>
    <line linenr="331" indent="&#160;&#160;&#160;">
      <text>gosub&#160;</text>
      <var>getAmount</var>
    </line>
    <line linenr="332" indent="&#160;&#160;">
      <text>end</text>
    </line>
    <line linenr="333" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="334" indent="">
      <text>end</text>
    </line>
    <line linenr="335" indent="">
      <text>endsub</text>
    </line>
    <line linenr="336" indent=""></line>
    <line linenr="337" indent="">
      <var>getAmount</var>
      <text>:</text>
    </line>
    <line linenr="338" indent="">
      <var>$sub.ware&#160;=&#160;</var>
      <text>&#160;get&#160;subtype&#160;of&#160;ware&#160;</text>
      <var>$chk.ware</var>
    </line>
    <line linenr="339" indent="">
      <var>if&#160;</var>
      <var>$sub.ware</var>
      <text>&#160;</text>
      <var>==</var>
      <text>&#160;</text>
      <var>[SSTYPE_SHIELD]</var>
    </line>
    <line linenr="340" indent="&#160;">
      <var>$free&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;number&#160;of&#160;shield&#160;bays</text>
    </line>
    <line linenr="341" indent="">
      <text>else</text>
    </line>
    <line linenr="342" indent="&#160;">
      <var>$free&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;free&#160;amount&#160;of&#160;ware&#160;</text>
      <var>$chk.ware</var>
      <text>&#160;in&#160;cargo&#160;bay</text>
    </line>
    <line linenr="343" indent="">
      <text>end</text>
    </line>
    <line linenr="344" indent="">
      <var>$text&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1064</var>
    </line>
    <line linenr="345" indent="">
      <var>$text2&#160;=&#160;</var>
      <text>&#160;read&#160;text:&#160;page=</text>
      <var>$page.id</var>
      <text>&#160;id=</text>
      <var>1065</var>
    </line>
    <line linenr="346" indent="">
      <var>$text&#160;=&#160;</var>
      <text>sprintf:&#160;fmt=</text>
      <var>'%s&#160;(%s&#160;=&#160;%s)'</var>
      <text>,&#160;</text>
      <var>$text</var>
      <text>,&#160;</text>
      <var>$text2</var>
      <text>,&#160;</text>
      <var>$free</var>
      <text>,&#160;</text>
      <var>null</var>
      <text>,&#160;</text>
      <var>null</var>
    </line>
    <line linenr="347" indent="">
      <var>$ret.amt&#160;=&#160;</var>
      <var>$ship&#160;-&gt;</var>
      <text>&#160;get&#160;user&#160;input:&#160;type=</text>
      <var>Var/Number</var>
      <text>,&#160;title=</text>
      <var>$text</var>
    </line>
    <line linenr="348" indent="">
      <text>endsub</text>
    </line>
    <line linenr="349" indent=""></line>
    <line linenr="350" indent="">
      <var>speakArray</var>
      <text>:</text>
    </line>
    <line linenr="351" indent="">
      <var>$speak&#160;=&#160;</var>
      <text>&#160;array&#160;alloc:&#160;size=</text>
      <var>0</var>
    </line>
    <line linenr="352" indent="">
      <var>if&#160;</var>
      <var>$script.engine</var>
      <text>&#160;</text>
      <var>&gt;</var>
      <text>&#160;</text>
      <var>40</var>
    </line>
    <line linenr="353" indent="&#160;">
      <var>$voice&#160;=&#160;</var>
      <text>&#160;get&#160;text&#160;id:&#160;ware=</text>
      <var>$ret.speak</var>
    </line>
    <line linenr="354" indent="&#160;">
      <var>if&#160;</var>
      <var>$voice</var>
    </line>
    <line linenr="355" indent="&#160;&#160;">
      <text>append&#160;</text>
      <var>17</var>
      <text>&#160;to&#160;array&#160;</text>
      <var>$speak</var>
    </line>
    <line linenr="356" indent="&#160;&#160;">
      <text>append&#160;</text>
      <var>$voice</var>
      <text>&#160;to&#160;array&#160;</text>
      <var>$speak</var>
    </line>
    <line linenr="357" indent="&#160;">
      <text>end</text>
    </line>
    <line linenr="358" indent="">
      <text>end</text>
    </line>
    <line linenr="359" indent="">
      <text>append&#160;</text>
      <var>13</var>
      <text>&#160;to&#160;array&#160;</text>
      <var>$speak</var>
    </line>
    <line linenr="360" indent="">
      <text>append&#160;</text>
      <var>1274</var>
      <text>&#160;to&#160;array&#160;</text>
      <var>$speak</var>
    </line>
    <line linenr="361" indent="">
      <var>START&#160;</var>
      <text>&#160;speak&#160;array:&#160;</text>
      <var>$speak</var>
      <text>&#160;prio=</text>
      <var>10</var>
    </line>
    <line linenr="362" indent="">
      <text>endsub</text>
    </line>
    <line linenr="363" indent=""></line>
    <line linenr="364" indent="">
      <var>installSound</var>
      <text>:</text>
    </line>
    <line linenr="365" indent="">
      <var>$ret.speak&#160;=&#160;</var>
      <var>$ret.install</var>
    </line>
    <line linenr="366" indent="">
      <text>gosub&#160;</text>
      <var>speakArray</var>
    </line>
    <line linenr="367" indent="">
      <text>endsub</text>
    </line>
    <line linenr="368" indent=""></line>
    <line linenr="369" indent="">
      <var>addSound</var>
      <text>:</text>
    </line>
    <line linenr="370" indent="">
      <var>$ret.speak&#160;=&#160;</var>
      <var>$ret.ware</var>
    </line>
    <line linenr="371" indent="">
      <text>gosub&#160;</text>
      <var>speakArray</var>
    </line>
    <line linenr="372" indent="">
      <text>endsub</text>
    </line>
    <line linenr="373" indent="">
      <text>return&#160;</text>
      <var>null</var>
    </line>
  </sourcetext>
  
